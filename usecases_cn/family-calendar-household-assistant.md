# 家庭日历聚合与家务助理

现代家庭要在不同的平台和格式上兼顾五个或更多的日历——工作、个人、共享家庭、孩子的学校、课外活动。由于不存在单一视图，重要事件往往被遗漏。与此同时，家务协调（购物清单、食品储藏室库存、预约安排）通过分散的短信进行，这些信息很容易被掩埋。

此用例将 OpenClaw 转变为一个始终在线的家庭协调员：将日历聚合到早间简报中，监控消息以获取可操作项目，并通过共享聊天界面管理家务后勤。

## 痛点

- **日历碎片化**：工作日历有安全限制，无法共享。学校日历以 PDF 或手写网站的形式出现。夏令营时间表在电子邮件中。每天早上手动检查每一个是不可持续的——而且“跨日历复制事件很有效，直到我忘记并且漏掉了一个。”
- **家务协调开销**：“我们有多少牛奶？”需要亲自检查冰箱，然后是地下室储藏室，然后回短信。在一周的杂货采购中，这种情况会成倍增加。
- **错过的预约**：预约确认通过短信到达并搁置在那里未被处理——没有日历事件，没有驾驶时间缓冲，没有提醒。

## 功能介绍

- **早间简报**：将所有家庭日历聚合到一个通过你首选渠道发送的每日摘要中
- **环境消息监控**：被动监视 iMessage/短信对话，并在检测到预约（牙医确认、会议计划等）时自动创建日历事件
- **驾驶时间缓冲**：在检测到的预约前后添加旅行时间块
- **家庭库存**：维护食品储藏室/冰箱物品的运行库存，任何一方都可以从任何地方查询
- **杂货协调**：跨食谱去重食材，追踪什么快用完了，并生成购物清单
- **基于照片的输入**：拍摄学校日历或冰柜内容的照片，智能体将其处理为结构化数据

## 所需技能

- 日历 API 访问权限（Google Calendar, Apple Calendar via `ical`）
- `imessage` 技能用于消息监控（仅限 macOS）
- Telegram 或 Slack 用于共享家庭聊天界面
- 文件系统访问权限用于库存追踪
- 摄像头/照片处理用于物理日历的 OCR

## 如何设置

### 1. 日历聚合

配置 OpenClaw 从所有家庭日历来源提取：

```text
## 日历来源

在早间简报（上午 8:00）：

1. 获取我的 Google 工作日历（只读 OAuth）
2. 获取共享家庭 Google 日历
3. 获取伴侣的日历（共享视图）
4. 检查 ~/Documents/school-calendars/ 是否有任何新的 PDF → OCR 并提取事件
5. 检查最近电子邮件中的日历附件或事件邀请

编译成单个简报：
- 今天的事件（所有日历，按来源颜色编码）
- 未来 3 天的冲突展望
- 自昨天以来添加的任何新事件
- 户外活动的天气背景

通过 Telegram/Slack 家庭频道发送。
```

### 2. 环境消息监控

这是关键的区别因素——智能体被动监视并在识别到可操作内容时采取行动：

```text
## 消息监控 (HEARTBEAT.md)

每 15 分钟：
1. 检查所有对话中的新 iMessage
2. 检测类似预约的模式：
   - "你的预约已确认为..."
   - "我们要不要在 [日期] [时间] 见面？"
   - "练习改到周六下午 3 点"
3. 当检测到时：
   - 创建带有详细信息的日历事件
   - 在前后添加 30 分钟驾驶缓冲
   - 发送确认给家庭 Telegram："已创建：牙医预约，周二下午 2 点。添加了驾驶时间 1:30-2:00 和 3:00-3:30。"
   - 如果与伴侣相关，添加邀请
4. 检测承诺/约定模式：
   - "我会在周五之前发送那个"
   - "下周我们去吃晚饭吧"
   → 创建日历保留或提醒
```

### 3. 家庭库存

```text
## 食品储藏室追踪

维护 ~/household/inventory.json 包含：
- 物品名称、数量、位置（冰箱/储藏室/地下室）
- 最后更新时间戳
- 低库存阈值

更新方法：
- 照片：用户发送冰箱/储藏室照片 → 视觉模型提取物品
- 文本："我们没鸡蛋了" / "买了 2 加仑牛奶"
- 收据：杂货收据照片 → 更新库存

查询：任何一方都可以通过 Telegram 询问：
- "我们有黄油吗？" → 检查库存，回复位置和数量
- "什么快用完了？" → 列出低于阈值的物品
- "生成购物清单" → 编译低库存物品 + 所需的任何食谱食材
```

## 关键见解

- **环境 > 主动**：最大的解锁是智能体在未被询问的情况下采取行动。在短信中检测预约并创建带有驾驶缓冲的日历事件——“我没让它那样做。它只是知道那就是我想要的。”
- **Mac Mini 是最佳选择**：此用例很大程度上受益于在家里运行的 Mac Mini——iMessage 集成、Apple Calendar 和始终在线的可用性
- **从只读开始**：在启用写入操作（创建事件、发送消息）之前，从日历读取和消息监控开始
- **共享 Telegram 频道**：让双方都能看到智能体在做什么——建立信任并尽早发现错误
- **照片输入被低估了**：拍摄学校日历 PDF 或冰柜内容的照片比打字快——而且视觉模型处理得很好

## 灵感来源

此用例结合了几个社区模式：

- **日历聚合**：由 HN 用户 `angiolillo` 在 [Hacker News 讨论](https://news.ycombinator.com/item?id=46872465) 中描述，他详细描述了每天早上分别检查工作、个人、家庭和孩子学校日历的痛苦。
- **环境消息监控**：由 [Sparkry AI](https://sparkryai.substack.com/p/24-hours-with-openclaw-the-ai-setup) 记录——当妻子收到牙医预约短信时，OpenClaw 自动创建了带有 30 分钟驾驶缓冲的日历事件，无需询问。这也在 [OpenClaw Showcase](https://openclaw.ai/showcase) 上得到确认，其中 `@theaaron` 称基于聊天的日历管理是“我体验过的 LLM 的最佳用途之一”。
- **家务协调**：Brandon Wang 的 [Clawdbot "Linguini"](https://brandon.wang/2026/clawdbot) 在家里的 Mac Mini 上运行——处理短信跟进，从照片创建日历事件，追踪 Airbnb 价格，处理冰柜库存照片，并通过 iMessage 和 Slack 协调家务后勤。
- **食品储藏室追踪**：多位 HN 用户讨论了维护家庭库存的价值（和挑战），`dns_snek` 指出：“我 5 秒钟前把东西放哪儿我就忘了……这对我来说真的是个大问题，因为我会让东西过期。”

## 相关链接

- [OpenClaw iMessage 技能](https://github.com/openclaw/openclaw)
- [Google Calendar API](https://developers.google.com/calendar)
- [Apple Calendar (EventKit)](https://developer.apple.com/documentation/eventkit)
- [OpenClaw Showcase — 日历感言](https://openclaw.ai/showcase)
